{% extends 'base/base.html.twig' %}
{% block content %}

	{% if error %}
		<div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
	{% endif %}

	<div class="col-xxl-4 col-xl-5 col-lg-6 col-md-7 col-sm-9">
		<div class="card shadow-lg">
			<div class="card-body p-4">
				<h3 class="fs-4 card-title fw-bold mb-4">Connexion</h3>

				{% if error %}
					<div class="alert alert-danger" role="alert">
						{{ error.messageKey|trans(error.messageData, 'security') }}
					</div>
				{% endif %}
				<?php if (isset($message_information) && !isset($message_warning) && !isset($message_error)) { ?>
					<div class="alert alert-info" role="info">
						<?php echo "$message_information"; ?>
					</div>
				<?php } ?>
				<?php if (isset($message_warning) && !isset($message_error) && !isset($message_information)) { ?>
					<div class="alert alert-warning" role="warning">
						<?php echo "$message_warning"; ?>
					</div>
				<?php } ?>
				<form role="form" method="post" action="{{ path('app_login') }}" class="needs-validation" autocomplete="on">
					<div class="mb-3">
						<div class="custom-control custom-radio custom-control-inline">
							<inputchecked<?php class="custom-control-input" type="radio" name="type" id="inlineRadio1" value="1" <?php if (isset($type) && $type == 1) { ?> } else { ?>checked
							<?php } ?>
							/>
							<label class="custom-control-label" for="inlineRadio1">Eleves</label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<inputchecked<?php class="custom-control-input" type="radio" name="type" id="inlineRadio2" value="2" <?php if (isset($type) && $type == 2) { ?> } ?>
								/>
								<label class="custom-control-label" for="inlineRadio2">Enseignants</label>
							</div>
							<div class="custom-control custom-radio custom-control-inline">
								<inputchecked<?php class="custom-control-input" type="radio" name="type" id="inlineRadio3" value="3" <?php if (isset($type) && $type == 3) { ?> } ?>
									/>
									<label class="custom-control-label" for="inlineRadio3">Administration</label>
								</div>
							</div>
							<div class="mb-3">
								<label class="mb-2 text-muted" for="email">Adresse Mail</label>
								<input id="_username" name="_username" type="email" class="form-control"  value="{{ last_username }}" required>
							</div>
							<div class="mb-3">
								<div class="mb-2 w-100">
									<label class="text-muted" for="password">Code confidentiel (6 chiffres)</label>
								</div>
								<input id="_password" name="_password" type="password" class="form-control"  minlength="6" maxlength="6" required>
							</div>

							<div class="d-flex align-items-center mb-3">
								<div class="form-check">
									<input type="checkbox" name="rememberme" id="remember" class="form-check-input">
									<label for="remember" class="form-check-label">Se souvenir de moi</label>
								</div>
							</div>
                            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
							<div class="mb-3">
								<button type="submit" class="btn btn-primary ms-auto">
									Connexion
								</button>
							</div>
							{% if error %}
								<div class="alert alert-danger" role="alert">
									{{ error.messageKey|trans(error.messageData, 'security') }}
								</div>
							{% endif %}
						</form>
					</div>
					<div class="card-footer py-2 border-0">
						<div class="text-center">
							Vous n'avez pas de compte ?
							<a href="#" class="text-dark">Contacter administration</a>
						</div>
					</div>
				</div>

			</div>
		{% endblock %}
